(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const mr=!1;var ln=Array.isArray,ds=Array.prototype.indexOf,Fn=Array.from,Xt=Object.defineProperty,it=Object.getOwnPropertyDescriptor,ps=Object.getOwnPropertyDescriptors,_s=Object.prototype,hs=Array.prototype,wr=Object.getPrototypeOf,sr=Object.isExtensible;const Ce=()=>{};function bs(e){return e()}function Pt(e){for(var t=0;t<e.length;t++)e[t]()}function gs(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const se=2,xr=4,on=8,dt=16,me=32,We=64,Er=128,oe=256,Zt=512,Y=1024,ue=2048,we=4096,ce=8192,Ye=16384,qn=32768,jn=65536,ar=1<<17,ys=1<<18,Nt=1<<19,Sr=1<<20,Pn=1<<21,Un=1<<22,Ve=1<<23,lt=Symbol("$state"),ms=Symbol("legacy props"),Bn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ws(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function kr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function xs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Es(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ss(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ks(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ps(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function $s(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function As(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Is(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Cs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const un=1,fn=2,Pr=4,Ts=8,Ls=16,Rs=2,Ms=4,Ns=8,Os=1,Ds=2,W=Symbol(),Fs="http://www.w3.org/1999/xhtml";let qs=!1;function $r(e){return e===this.v}function Ar(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ir(e){return!Ar(e,this.v)}let pt=!1,js=!1;function Us(){pt=!0}let O=null;function en(e){O=e}function Je(e,t=!1,n){O={p:O,c:null,e:null,s:e,x:null,l:pt&&!t?{s:null,u:null,$:[]}:null}}function Ge(e){var t=O,n=t.e;if(n!==null){t.e=null;for(var r of n)Kr(r)}return O=t.p,{}}function Ot(){return!pt||O!==null&&O.l===null}const Bs=new WeakMap;function Vs(e){var t=T;if(t===null)return L.f|=Ve,e;if((t.f&qn)===0){if((t.f&Er)===0)throw!t.parent&&e instanceof Error&&Cr(e),e;t.b.error(e)}else Vn(e,t)}function Vn(e,t){for(;t!==null;){if((t.f&Er)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&Cr(e),e}function Cr(e){const t=Bs.get(e);t&&(Xt(e,"message",{value:t.message}),Xt(e,"stack",{value:t.stack}))}let $t=[],$n=[];function Tr(){var e=$t;$t=[],Pt(e)}function Hs(){var e=$n;$n=[],Pt(e)}function Lr(e){$t.length===0&&queueMicrotask(Tr),$t.push(e)}function zs(){$t.length>0&&Tr(),$n.length>0&&Hs()}function Ks(){for(var e=T.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&ws(),e}function Hn(e){var t=se|ue,n=L!==null&&(L.f&se)!==0?L:null;return T===null||n!==null&&(n.f&oe)!==0?t|=oe:T.f|=Nt,{ctx:O,deps:null,effects:null,equals:$r,f:t,fn:e,reactions:null,rv:0,v:W,wv:0,parent:n??T,ac:null}}function Ws(e,t){let n=T;n===null&&xs();var r=n.b,s=void 0,a=At(W),i=null,o=!L;return ia(()=>{try{var l=e();i&&Promise.resolve(l).catch(()=>{})}catch(v){l=Promise.reject(v)}var u=()=>l;s=i?.then(u,u)??Promise.resolve(l),i=s;var f=N,d=r.pending;o&&(r.update_pending_count(1),d||f.increment());const _=(v,c=void 0)=>{i=null,d||f.activate(),c?c!==Bn&&(a.f|=Ve,It(a,c)):((a.f&Ve)!==0&&(a.f^=Ve),It(a,v)),o&&(r.update_pending_count(-1),d||f.decrement()),Nr()};if(s.then(_,v=>_(null,v||"unknown")),f)return()=>{queueMicrotask(()=>f.neuter())}}),new Promise(l=>{function u(f){function d(){f===s?l(a):u(s)}f.then(d,d)}u(s)})}function zn(e){const t=Hn(e);return t.equals=Ir,t}function Rr(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)ye(t[n])}}function Ys(e){for(var t=e.parent;t!==null;){if((t.f&se)===0)return t;t=t.parent}return null}function Kn(e){var t,n=T;Le(Ys(e));try{Rr(e),t=ns(e)}finally{Le(n)}return t}function Mr(e){var t=Kn(e);if(e.equals(t)||(e.v=t,e.wv=es()),!Qe){var n=(Ie||(e.f&oe)!==0)&&e.deps!==null?we:Y;Q(e,n)}}function Js(e,t,n){const r=Ot()?Hn:zn;if(t.length===0){n(e.map(r));return}var s=N,a=T,i=Gs(),o=Ks();Promise.all(t.map(l=>Ws(l))).then(l=>{s?.activate(),i();try{n([...e.map(r),...l])}catch(u){(a.f&Ye)===0&&Vn(u,a)}s?.deactivate(),Nr()}).catch(l=>{o.error(l)})}function Gs(){var e=T,t=L,n=O,r=N;return function(){Le(e),be(t),en(n),r?.activate()}}function Nr(){Le(null),be(null),en(null)}const yn=new Set;let N=null,Gt=null,ir=new Set,tn=[];function Or(){const e=tn.shift();tn.length>0&&queueMicrotask(Or),e()}let Ke=[],cn=null,An=!1,Qt=!1;class ft{current=new Map;#o=new Map;#s=new Set;#e=0;#u=null;#f=!1;#n=[];#a=[];#r=[];#t=[];#i=[];#c=[];#v=[];skipped_effects=new Set;process(t){Ke=[],Gt=null;for(const s of t)this.#p(s);if(this.#n.length===0&&this.#e===0){this.#d();var n=this.#r,r=this.#t;this.#r=[],this.#t=[],this.#i=[],Gt=N,N=null,lr(n),lr(r),N===null?N=this:yn.delete(this),this.#u?.resolve()}else this.#l(this.#r),this.#l(this.#t),this.#l(this.#i);for(const s of this.#n)ze(s);for(const s of this.#a)ze(s);this.#n=[],this.#a=[]}#p(t){t.f^=Y;for(var n=t.first;n!==null;){var r=n.f,s=(r&(me|We))!==0,a=s&&(r&Y)!==0,i=a||(r&ce)!==0||this.skipped_effects.has(n);if(!i&&n.fn!==null){if(s)n.f^=Y;else if((r&xr)!==0)this.#t.push(n);else if((r&Y)===0)if((r&Un)!==0){var o=n.b?.pending?this.#a:this.#n;o.push(n)}else Dt(n)&&((n.f&dt)!==0&&this.#i.push(n),ze(n));var l=n.first;if(l!==null){n=l;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)n=u.next,u=u.parent}}#l(t){for(const n of t)((n.f&ue)!==0?this.#c:this.#v).push(n),Q(n,Y);t.length=0}capture(t,n){this.#o.has(t)||this.#o.set(t,n),this.current.set(t,t.v)}activate(){N=this}deactivate(){N=null,Gt=null;for(const t of ir)if(ir.delete(t),t(),N!==null)break}neuter(){this.#f=!0}flush(){Ke.length>0?Dr():this.#d(),N===this&&(this.#e===0&&yn.delete(this),this.deactivate())}#d(){if(!this.#f)for(const t of this.#s)t();this.#s.clear()}increment(){this.#e+=1}decrement(){if(this.#e-=1,this.#e===0){for(const t of this.#c)Q(t,ue),ct(t);for(const t of this.#v)Q(t,we),ct(t);this.#r=[],this.#t=[],this.flush()}else this.deactivate()}add_callback(t){this.#s.add(t)}settled(){return(this.#u??=gs()).promise}static ensure(){if(N===null){const t=N=new ft;yn.add(N),Qt||ft.enqueue(()=>{N===t&&t.flush()})}return N}static enqueue(t){tn.length===0&&queueMicrotask(Or),tn.unshift(t)}}function Qs(e){var t=Qt;Qt=!0;try{for(var n;;){if(zs(),Ke.length===0&&(N?.flush(),Ke.length===0))return cn=null,n;Dr()}}finally{Qt=t}}function Dr(){var e=ut;An=!0;try{var t=0;for(cr(!0);Ke.length>0;){var n=ft.ensure();if(t++>1e3){var r,s;Xs()}n.process(Ke),Te.clear()}}finally{An=!1,cr(e),cn=null}}function Xs(){try{Ps()}catch(e){Vn(e,cn)}}let Be=null;function lr(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Ye|ce))===0&&Dt(r)&&(Be=[],ze(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Gr(r):r.fn=null),Be?.length>0)){Te.clear();for(const s of Be)ze(s);Be=[]}}Be=null}}function ct(e){for(var t=cn=e;t.parent!==null;){t=t.parent;var n=t.f;if(An&&t===T&&(n&dt)!==0)return;if((n&(We|me))!==0){if((n&Y)===0)return;t.f^=Y}}Ke.push(t)}const Te=new Map;function At(e,t){var n={f:0,v:e,reactions:null,equals:$r,rv:0,wv:0};return n}function Ae(e,t){const n=At(e);return ua(n),n}function ie(e,t=!1,n=!0){const r=At(e);return t||(r.equals=Ir),pt&&n&&O!==null&&O.l!==null&&(O.l.s??=[]).push(r),r}function A(e,t,n=!1){L!==null&&(!he||(L.f&ar)!==0)&&Ot()&&(L.f&(se|dt|Un|ar))!==0&&!ge?.includes(e)&&Cs();let r=n?st(t):t;return It(e,r)}function It(e,t){if(!e.equals(t)){var n=e.v;Qe?Te.set(e,t):Te.set(e,n),e.v=t;var r=ft.ensure();r.capture(e,n),(e.f&se)!==0&&((e.f&ue)!==0&&Kn(e),Q(e,(e.f&oe)===0?Y:we)),e.wv=es(),Fr(e,ue),Ot()&&T!==null&&(T.f&Y)!==0&&(T.f&(me|We))===0&&(ae===null?fa([e]):ae.push(e))}return t}function mn(e,t=1){var n=p(e),r=t===1?n++:n--;return A(e,n),r}function wn(e){A(e,e.v+1)}function Fr(e,t){var n=e.reactions;if(n!==null)for(var r=Ot(),s=n.length,a=0;a<s;a++){var i=n[a],o=i.f;if(!(!r&&i===T)){var l=(o&ue)===0;l&&Q(i,t),(o&se)!==0?Fr(i,we):l&&((o&dt)!==0&&Be!==null&&Be.push(i),ct(i))}}}function st(e){if(typeof e!="object"||e===null||lt in e)return e;const t=wr(e);if(t!==_s&&t!==hs)return e;var n=new Map,r=ln(e),s=Ae(0),a=He,i=o=>{if(He===a)return o();var l=L,u=He;be(null),dr(a);var f=o();return be(l),dr(u),f};return r&&n.set("length",Ae(e.length)),new Proxy(e,{defineProperty(o,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&As();var f=n.get(l);return f===void 0?f=i(()=>{var d=Ae(u.value);return n.set(l,d),d}):A(f,u.value,!0),!0},deleteProperty(o,l){var u=n.get(l);if(u===void 0){if(l in o){const f=i(()=>Ae(W));n.set(l,f),wn(s)}}else A(u,W),wn(s);return!0},get(o,l,u){if(l===lt)return e;var f=n.get(l),d=l in o;if(f===void 0&&(!d||it(o,l)?.writable)&&(f=i(()=>{var v=st(d?o[l]:W),c=Ae(v);return c}),n.set(l,f)),f!==void 0){var _=p(f);return _===W?void 0:_}return Reflect.get(o,l,u)},getOwnPropertyDescriptor(o,l){var u=Reflect.getOwnPropertyDescriptor(o,l);if(u&&"value"in u){var f=n.get(l);f&&(u.value=p(f))}else if(u===void 0){var d=n.get(l),_=d?.v;if(d!==void 0&&_!==W)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return u},has(o,l){if(l===lt)return!0;var u=n.get(l),f=u!==void 0&&u.v!==W||Reflect.has(o,l);if(u!==void 0||T!==null&&(!f||it(o,l)?.writable)){u===void 0&&(u=i(()=>{var _=f?st(o[l]):W,v=Ae(_);return v}),n.set(l,u));var d=p(u);if(d===W)return!1}return f},set(o,l,u,f){var d=n.get(l),_=l in o;if(r&&l==="length")for(var v=u;v<d.v;v+=1){var c=n.get(v+"");c!==void 0?A(c,W):v in o&&(c=i(()=>Ae(W)),n.set(v+"",c))}if(d===void 0)(!_||it(o,l)?.writable)&&(d=i(()=>Ae(void 0)),A(d,st(u)),n.set(l,d));else{_=d.v!==W;var b=i(()=>st(u));A(d,b)}var h=Reflect.getOwnPropertyDescriptor(o,l);if(h?.set&&h.set.call(f,u),!_){if(r&&typeof l=="string"){var m=n.get("length"),g=Number(l);Number.isInteger(g)&&g>=m.v&&A(m,g+1)}wn(s)}return!0},ownKeys(o){p(s);var l=Reflect.ownKeys(o).filter(d=>{var _=n.get(d);return _===void 0||_.v!==W});for(var[u,f]of n)f.v!==W&&!(u in o)&&l.push(u);return l},setPrototypeOf(){Is()}})}var or,qr,jr,Ur;function Zs(){if(or===void 0){or=window,qr=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;jr=it(t,"firstChild").get,Ur=it(t,"nextSibling").get,sr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),sr(n)&&(n.__t=void 0)}}function _t(e=""){return document.createTextNode(e)}function nn(e){return jr.call(e)}function vn(e){return Ur.call(e)}function S(e,t){return nn(e)}function ot(e,t){{var n=nn(e);return n instanceof Comment&&n.data===""?vn(n):n}}function I(e,t=1,n=!1){let r=e;for(;t--;)r=vn(r);return r}function ea(e){e.textContent=""}function Br(){return!1}let ur=!1;function ta(){ur||(ur=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function dn(e){var t=L,n=T;be(null),Le(null);try{return e()}finally{be(t),Le(n)}}function Vr(e,t,n,r=n){e.addEventListener(t,()=>dn(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),ta()}function Hr(e){T===null&&L===null&&ks(),L!==null&&(L.f&oe)!==0&&T===null&&Ss(),Qe&&Es()}function na(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function xe(e,t,n,r=!0){var s=T;s!==null&&(s.f&ce)!==0&&(e|=ce);var a={ctx:O,deps:null,nodes_start:null,nodes_end:null,f:e|ue,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{ze(a),a.f|=qn}catch(l){throw ye(a),l}else t!==null&&ct(a);if(r){var i=a;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&Nt)===0&&(i=i.first),i!==null&&(i.parent=s,s!==null&&na(i,s),L!==null&&(L.f&se)!==0&&(e&We)===0)){var o=L;(o.effects??=[]).push(i)}}return a}function zr(e){const t=xe(on,null,!1);return Q(t,Y),t.teardown=e,t}function In(e){Hr();var t=T.f,n=!L&&(t&me)!==0&&(t&qn)===0;if(n){var r=O;(r.e??=[]).push(e)}else return Kr(e)}function Kr(e){return xe(xr|Sr,e,!1)}function ra(e){return Hr(),xe(on|Sr,e,!0)}function sa(e){ft.ensure();const t=xe(We|Nt,e,!0);return(n={})=>new Promise(r=>{n.outro?Wn(t,()=>{ye(t),r(void 0)}):(ye(t),r(void 0))})}function fr(e,t){var n=O,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=pn(()=>{e(),!r.ran&&(r.ran=!0,z(t))})}function aa(){var e=O;pn(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&Y)!==0&&Q(n,we),Dt(n)&&ze(n),t.ran=!1}})}function ia(e){return xe(Un|Nt,e,!0)}function pn(e,t=0){return xe(on|t,e,!0)}function _e(e,t=[],n=[]){Js(t,n,r=>{xe(on,()=>e(...r.map(p)),!0)})}function Wr(e,t=0){var n=xe(dt|t,e,!0);return n}function Ct(e,t=!0){return xe(me|Nt,e,!0,t)}function Yr(e){var t=e.teardown;if(t!==null){const n=Qe,r=L;vr(!0),be(null);try{t.call(null)}finally{vr(n),be(r)}}}function Jr(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&dn(()=>{s.abort(Bn)});var r=n.next;(n.f&We)!==0?n.parent=null:ye(n,t),n=r}}function la(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&me)===0&&ye(t),t=n}}function ye(e,t=!0){var n=!1;(t||(e.f&ys)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(oa(e.nodes_start,e.nodes_end),n=!0),Jr(e,t&&!n),rn(e,0),Q(e,Ye);var r=e.transitions;if(r!==null)for(const a of r)a.stop();Yr(e);var s=e.parent;s!==null&&s.first!==null&&Gr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function oa(e,t){for(;e!==null;){var n=e===t?null:vn(e);e.remove(),e=n}}function Gr(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Wn(e,t){var n=[];Yn(e,n,!0),Qr(n,()=>{ye(e),t&&t()})}function Qr(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function Yn(e,t,n){if((e.f&ce)===0){if(e.f^=ce,e.transitions!==null)for(const i of e.transitions)(i.is_global||n)&&t.push(i);for(var r=e.first;r!==null;){var s=r.next,a=(r.f&jn)!==0||(r.f&me)!==0;Yn(r,t,a?n:!1),r=s}}}function Jn(e){Xr(e,!0)}function Xr(e,t){if((e.f&ce)!==0){e.f^=ce,(e.f&Y)===0&&(Q(e,ue),ct(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&jn)!==0||(n.f&me)!==0;Xr(n,s?t:!1),n=r}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let ut=!1;function cr(e){ut=e}let Qe=!1;function vr(e){Qe=e}let L=null,he=!1;function be(e){L=e}let T=null;function Le(e){T=e}let ge=null;function ua(e){L!==null&&(ge===null?ge=[e]:ge.push(e))}let G=null,re=0,ae=null;function fa(e){ae=e}let Zr=1,Tt=0,He=Tt;function dr(e){He=e}let Ie=!1;function es(){return++Zr}function Dt(e){var t=e.f;if((t&ue)!==0)return!0;if((t&we)!==0){var n=e.deps,r=(t&oe)!==0;if(n!==null){var s,a,i=(t&Zt)!==0,o=r&&T!==null&&!Ie,l=n.length;if((i||o)&&(T===null||(T.f&Ye)===0)){var u=e,f=u.parent;for(s=0;s<l;s++)a=n[s],(i||!a?.reactions?.includes(u))&&(a.reactions??=[]).push(u);i&&(u.f^=Zt),o&&f!==null&&(f.f&oe)===0&&(u.f^=oe)}for(s=0;s<l;s++)if(a=n[s],Dt(a)&&Mr(a),a.wv>e.wv)return!0}(!r||T!==null&&!Ie)&&Q(e,Y)}return!1}function ts(e,t,n=!0){var r=e.reactions;if(r!==null&&!ge?.includes(e))for(var s=0;s<r.length;s++){var a=r[s];(a.f&se)!==0?ts(a,t,!1):t===a&&(n?Q(a,ue):(a.f&Y)!==0&&Q(a,we),ct(a))}}function ns(e){var t=G,n=re,r=ae,s=L,a=Ie,i=ge,o=O,l=he,u=He,f=e.f;G=null,re=0,ae=null,Ie=(f&oe)!==0&&(he||!ut||L===null),L=(f&(me|We))===0?e:null,ge=null,en(e.ctx),he=!1,He=++Tt,e.ac!==null&&(dn(()=>{e.ac.abort(Bn)}),e.ac=null);try{e.f|=Pn;var d=e.fn,_=d(),v=e.deps;if(G!==null){var c;if(rn(e,re),v!==null&&re>0)for(v.length=re+G.length,c=0;c<G.length;c++)v[re+c]=G[c];else e.deps=v=G;if(!Ie||(f&se)!==0&&e.reactions!==null)for(c=re;c<v.length;c++)(v[c].reactions??=[]).push(e)}else v!==null&&re<v.length&&(rn(e,re),v.length=re);if(Ot()&&ae!==null&&!he&&v!==null&&(e.f&(se|we|ue))===0)for(c=0;c<ae.length;c++)ts(ae[c],e);return s!==null&&s!==e&&(Tt++,ae!==null&&(r===null?r=ae:r.push(...ae))),(e.f&Ve)!==0&&(e.f^=Ve),_}catch(b){return Vs(b)}finally{e.f^=Pn,G=t,re=n,ae=r,L=s,Ie=a,ge=i,en(o),he=l,He=u}}function ca(e,t){let n=t.reactions;if(n!==null){var r=ds.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&se)!==0&&(G===null||!G.includes(t))&&(Q(t,we),(t.f&(oe|Zt))===0&&(t.f^=Zt),Rr(t),rn(t,0))}function rn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)ca(e,n[r])}function ze(e){var t=e.f;if((t&Ye)===0){Q(e,Y);var n=T,r=ut;T=e,ut=!0;try{(t&dt)!==0?la(e):Jr(e),Yr(e);var s=ns(e);e.teardown=typeof s=="function"?s:null,e.wv=Zr;var a;mr&&js&&(e.f&ue)!==0&&e.deps}finally{ut=r,T=n}}}async function va(){await Promise.resolve(),Qs()}function p(e){var t=e.f,n=(t&se)!==0;if(L!==null&&!he){var r=T!==null&&(T.f&Ye)!==0;if(!r&&!ge?.includes(e)){var s=L.deps;if((L.f&Pn)!==0)e.rv<Tt&&(e.rv=Tt,G===null&&s!==null&&s[re]===e?re++:G===null?G=[e]:(!Ie||!G.includes(e))&&G.push(e));else{(L.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[L]:a.includes(L)||a.push(L)}}}else if(n&&e.deps===null&&e.effects===null){var i=e,o=i.parent;o!==null&&(o.f&oe)===0&&(i.f^=oe)}if(Qe){if(Te.has(e))return Te.get(e);if(n){i=e;var l=i.v;return((i.f&Y)===0&&i.reactions!==null||rs(i))&&(l=Kn(i)),Te.set(i,l),l}}else n&&(i=e,Dt(i)&&Mr(i));if((e.f&Ve)!==0)throw e.v;return e.v}function rs(e){if(e.v===W)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Te.has(t)||(t.f&se)!==0&&rs(t))return!0;return!1}function z(e){var t=he;try{return he=!0,e()}finally{he=t}}const da=-7169;function Q(e,t){e.f=e.f&da|t}function pa(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(lt in e)Cn(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&lt in n&&Cn(n)}}}function Cn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Cn(e[r],t)}catch{}const n=wr(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=ps(n);for(let s in r){const a=r[s].get;if(a)try{a.call(e)}catch{}}}}}const _a=["touchstart","touchmove"];function ha(e){return _a.includes(e)}const ba=new Set,pr=new Set;function ga(e,t,n,r={}){function s(a){if(r.capture||Et.call(t,a),!a.cancelBubble)return dn(()=>n?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Lr(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function F(e,t,n,r,s){var a={capture:r,passive:s},i=ga(e,t,n,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&zr(()=>{t.removeEventListener(e,i,a)})}let _r=null;function Et(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],a=s[0]||e.target;_r=e;var i=0,o=_r===e&&e.__root;if(o){var l=s.indexOf(o);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var u=s.indexOf(t);if(u===-1)return;l<=u&&(i=l)}if(a=s[i]||e.target,a!==t){Xt(e,"currentTarget",{configurable:!0,get(){return a||n}});var f=L,d=T;be(null),Le(null);try{for(var _,v=[];a!==null;){var c=a.assignedSlot||a.parentNode||a.host||null;try{var b=a["__"+r];if(b!=null&&(!a.disabled||e.target===a))if(ln(b)){var[h,...m]=b;h.apply(a,[e,...m])}else b.call(a,e)}catch(g){_?v.push(g):_=g}if(e.cancelBubble||c===t||c===null)break;a=c}if(_){for(let g of v)queueMicrotask(()=>{throw g});throw _}}finally{e.__root=t,delete e.currentTarget,be(f),Le(d)}}}function ya(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function sn(e,t){var n=T;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function B(e,t){var n=(t&Os)!==0,r=(t&Ds)!==0,s,a=!e.startsWith("<!>");return()=>{s===void 0&&(s=ya(a?e:"<!>"+e),n||(s=nn(s)));var i=r||qr?document.importNode(s,!0):s.cloneNode(!0);if(n){var o=nn(i),l=i.lastChild;sn(o,l)}else sn(i,i);return i}}function hr(e=""){{var t=_t(e+"");return sn(t,t),t}}function Gn(){var e=document.createDocumentFragment(),t=document.createComment(""),n=_t();return e.append(t,n),sn(t,n),e}function M(e,t){e!==null&&e.before(t)}function K(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function ma(e,t){return wa(e,t)}const nt=new Map;function wa(e,{target:t,anchor:n,props:r={},events:s,context:a,intro:i=!0}){Zs();var o=new Set,l=d=>{for(var _=0;_<d.length;_++){var v=d[_];if(!o.has(v)){o.add(v);var c=ha(v);t.addEventListener(v,Et,{passive:c});var b=nt.get(v);b===void 0?(document.addEventListener(v,Et,{passive:c}),nt.set(v,1)):nt.set(v,b+1)}}};l(Fn(ba)),pr.add(l);var u=void 0,f=sa(()=>{var d=n??t.appendChild(_t());return Ct(()=>{if(a){Je({});var _=O;_.c=a}s&&(r.$$events=s),u=e(d,r)||{},a&&Ge()}),()=>{for(var _ of o){t.removeEventListener(_,Et);var v=nt.get(_);--v===0?(document.removeEventListener(_,Et),nt.delete(_)):nt.set(_,v)}pr.delete(l),d!==n&&d.parentNode?.removeChild(d)}});return xa.set(u,f),u}let xa=new WeakMap;function le(e,t,n=!1){var r=e,s=null,a=null,i=W,o=n?jn:0,l=!1;const u=(v,c=!0)=>{l=!0,_(c,v)};var f=null;function d(){f!==null&&(f.lastChild.remove(),r.before(f),f=null);var v=i?s:a,c=i?a:s;v&&Jn(v),c&&Wn(c,()=>{i?a=null:s=null})}const _=(v,c)=>{if(i!==(i=v)){var b=Br(),h=r;if(b&&(f=document.createDocumentFragment(),f.append(h=_t())),i?s??=c&&Ct(()=>c(h)):a??=c&&Ct(()=>c(h)),b){var m=N,g=i?s:a,x=i?a:s;g&&m.skipped_effects.delete(g),x&&m.skipped_effects.add(x),m.add_callback(d)}else d()}};Wr(()=>{l=!1,t(u),l||_(null,null)},o)}function Qn(e,t){return t}function Ea(e,t,n){for(var r=e.items,s=[],a=t.length,i=0;i<a;i++)Yn(t[i].e,s,!0);var o=a>0&&s.length===0&&n!==null;if(o){var l=n.parentNode;ea(l),l.append(n),r.clear(),pe(e,t[0].prev,t[a-1].next)}Qr(s,()=>{for(var u=0;u<a;u++){var f=t[u];o||(r.delete(f.k),pe(e,f.prev,f.next)),ye(f.e,!o)}})}function Xn(e,t,n,r,s,a=null){var i=e,o={flags:t,items:new Map,first:null},l=(t&Pr)!==0;if(l){var u=e;i=u.appendChild(_t())}var f=null,d=!1,_=new Map,v=zn(()=>{var m=n();return ln(m)?m:m==null?[]:Fn(m)}),c,b;function h(){Sa(b,c,o,_,i,s,t,r,n),a!==null&&(c.length===0?f?Jn(f):f=Ct(()=>a(i)):f!==null&&Wn(f,()=>{f=null}))}Wr(()=>{b??=T,c=p(v);var m=c.length;if(!(d&&m===0)){d=m===0;var g,x,P,C;if(Br()){var $=new Set,k=N;for(x=0;x<m;x+=1){P=c[x],C=r(P,x);var D=o.items.get(C)??_.get(C);D?(t&(un|fn))!==0&&ss(D,P,x,t):(g=as(null,o,null,null,P,C,x,s,t,n,!0),_.set(C,g)),$.add(C)}for(const[j,Me]of o.items)$.has(j)||k.skipped_effects.add(Me.e);k.add_callback(h)}else h();p(v)}})}function Sa(e,t,n,r,s,a,i,o,l){var u=(i&Ts)!==0,f=(i&(un|fn))!==0,d=t.length,_=n.items,v=n.first,c=v,b,h=null,m,g=[],x=[],P,C,$,k;if(u)for(k=0;k<d;k+=1)P=t[k],C=o(P,k),$=_.get(C),$!==void 0&&($.a?.measure(),(m??=new Set).add($));for(k=0;k<d;k+=1){if(P=t[k],C=o(P,k),$=_.get(C),$===void 0){var D=r.get(C);if(D!==void 0){r.delete(C),_.set(C,D);var j=h?h.next:c;pe(n,h,D),pe(n,D,j),xn(D,j,s),h=D}else{var Me=c?c.e.nodes_start:s;h=as(Me,n,h,h===null?n.first:h.next,P,C,k,a,i,l)}_.set(C,h),g=[],x=[],c=h.next;continue}if(f&&ss($,P,k,i),($.e.f&ce)!==0&&(Jn($.e),u&&($.a?.unfix(),(m??=new Set).delete($))),$!==c){if(b!==void 0&&b.has($)){if(g.length<x.length){var Ee=x[0],E;h=Ee.prev;var q=g[0],U=g[g.length-1];for(E=0;E<g.length;E+=1)xn(g[E],Ee,s);for(E=0;E<x.length;E+=1)b.delete(x[E]);pe(n,q.prev,U.next),pe(n,h,q),pe(n,U,Ee),c=Ee,h=U,k-=1,g=[],x=[]}else b.delete($),xn($,c,s),pe(n,$.prev,$.next),pe(n,$,h===null?n.first:h.next),pe(n,h,$),h=$;continue}for(g=[],x=[];c!==null&&c.k!==C;)(c.e.f&ce)===0&&(b??=new Set).add(c),x.push(c),c=c.next;if(c===null)continue;$=c}g.push($),h=$,c=$.next}if(c!==null||b!==void 0){for(var de=b===void 0?[]:Fn(b);c!==null;)(c.e.f&ce)===0&&de.push(c),c=c.next;var J=de.length;if(J>0){var Ne=(i&Pr)!==0&&d===0?s:null;if(u){for(k=0;k<J;k+=1)de[k].a?.measure();for(k=0;k<J;k+=1)de[k].a?.fix()}Ea(n,de,Ne)}}u&&Lr(()=>{if(m!==void 0)for($ of m)$.a?.apply()}),e.first=n.first&&n.first.e,e.last=h&&h.e;for(var Oe of r.values())ye(Oe.e);r.clear()}function ss(e,t,n,r){(r&un)!==0&&It(e.v,t),(r&fn)!==0?It(e.i,n):e.i=n}function as(e,t,n,r,s,a,i,o,l,u,f){var d=(l&un)!==0,_=(l&Ls)===0,v=d?_?ie(s,!1,!1):At(s):s,c=(l&fn)===0?i:At(i),b={i:c,v,k:a,a:null,e:null,prev:n,next:r};try{if(e===null){var h=document.createDocumentFragment();h.append(e=_t())}return b.e=Ct(()=>o(e,v,c,u),qs),b.e.prev=n&&n.e,b.e.next=r&&r.e,n===null?f||(t.first=b):(n.next=b,n.e.next=b.e),r!==null&&(r.prev=b,r.e.prev=b.e),b}finally{}}function xn(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==null&&a!==r;){var i=vn(a);s.before(a),a=i}}function pe(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}const br=[...` 	
\r\f \v\uFEFF`];function ka(e,t,n){var r=e==null?"":""+e;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var a=s.length,i=0;(i=r.indexOf(s,i))>=0;){var o=i+a;(i===0||br.includes(r[i-1]))&&(o===r.length||br.includes(r[o]))?r=(i===0?"":r.substring(0,i))+r.substring(o+1):i=o}}return r===""?null:r}function vt(e,t,n,r,s,a){var i=e.__className;if(i!==n||i===void 0){var o=ka(n,r,a);o==null?e.removeAttribute("class"):e.className=o,e.__className=n}else if(a&&s!==a)for(var l in a){var u=!!a[l];(s==null||u!==!!s[l])&&e.classList.toggle(l,u)}return a}const Pa=Symbol("is custom element"),$a=Symbol("is html");function Aa(e,t){var n=Ia(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function Ia(e){return e.__attributes??={[Pa]:e.nodeName.includes("-"),[$a]:e.namespaceURI===Fs}}function St(e,t,n=t){var r=new WeakSet;Vr(e,"input",async s=>{var a=s?e.defaultValue:e.value;if(a=En(e)?Sn(a):a,n(a),N!==null&&r.add(N),await va(),a!==(a=t())){var i=e.selectionStart,o=e.selectionEnd;e.value=a??"",o!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(o,e.value.length))}}),z(t)==null&&e.value&&(n(En(e)?Sn(e.value):e.value),N!==null&&r.add(N)),pn(()=>{var s=t();if(e===document.activeElement){var a=Gt??N;if(r.has(a))return}En(e)&&s===Sn(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function Ca(e,t,n=t){Vr(e,"change",r=>{var s=r?e.defaultChecked:e.checked;n(s)}),z(t)==null&&n(e.checked),pn(()=>{var r=t();e.checked=!!r})}function En(e){var t=e.type;return t==="number"||t==="range"}function Sn(e){return e===""?null:+e}function is(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}function ht(e=!1){const t=O,n=t.l.u;if(!n)return;let r=()=>pa(t.s);if(e){let s=0,a={};const i=Hn(()=>{let o=!1;const l=t.s;for(const u in l)l[u]!==a[u]&&(a[u]=l[u],o=!0);return o&&s++,s});r=()=>p(i)}n.b.length&&ra(()=>{gr(t,r),Pt(n.b)}),In(()=>{const s=z(()=>n.m.map(bs));return()=>{for(const a of s)typeof a=="function"&&a()}}),n.a.length&&In(()=>{gr(t,r),Pt(n.a)})}function gr(e,t){if(e.l.s)for(const n of e.l.s)p(n);t()}function Ta(e,t){var n=e.$$events?.[t.type],r=ln(n)?n.slice():n==null?[]:[n];for(var s of r)s.call(this,t)}function Zn(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Ce;const r=z(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const rt=[];function La(e,t){return{subscribe:ve(e,t).subscribe}}function ve(e,t=Ce){let n=null;const r=new Set;function s(o){if(Ar(e,o)&&(e=o,n)){const l=!rt.length;for(const u of r)u[1](),rt.push(u,e);if(l){for(let u=0;u<rt.length;u+=2)rt[u][0](rt[u+1]);rt.length=0}}}function a(o){s(o(e))}function i(o,l=Ce){const u=[o,l];return r.add(u),r.size===1&&(n=t(s,a)||Ce),o(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:s,update:a,subscribe:i}}function Ra(e,t,n){const r=!Array.isArray(e),s=r?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return La(n,(i,o)=>{let l=!1;const u=[];let f=0,d=Ce;const _=()=>{if(f)return;d();const c=t(r?u[0]:u,i,o);a?i(c):d=typeof c=="function"?c:Ce},v=s.map((c,b)=>Zn(c,h=>{u[b]=h,f&=~(1<<b),l&&_()},()=>{f|=1<<b}));return l=!0,_(),function(){Pt(v),d(),l=!1}})}function Tn(e){let t;return Zn(e,n=>t=n)(),t}let Jt=!1,Ln=Symbol();function V(e,t,n){const r=n[t]??={store:null,source:ie(void 0),unsubscribe:Ce};if(r.store!==e&&!(Ln in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Ce;else{var s=!0;r.unsubscribe=Zn(e,a=>{s?r.source.v=a:A(r.source,a)}),s=!1}return e&&Ln in n?Tn(e):p(r.source)}function xt(e,t){return e.set(t),t}function bt(){const e={};function t(){zr(()=>{for(var n in e)e[n].unsubscribe();Xt(e,Ln,{enumerable:!1,value:!0})})}return[e,t]}function Ma(e){var t=Jt;try{return Jt=!1,[e(),Jt]}finally{Jt=t}}function yr(e,t,n,r){var s=!pt||(n&Rs)!==0,a=(n&Ns)!==0,i=r,o=!0,l=()=>(o&&(o=!1,i=r),i),u;{var f=lt in e||ms in e;u=it(e,t)?.set??(f&&t in e?g=>e[t]=g:void 0)}var d,_=!1;[d,_]=Ma(()=>e[t]),d===void 0&&r!==void 0&&(d=l(),u&&(s&&$s(),u(d)));var v;if(s?v=()=>{var g=e[t];return g===void 0?l():(o=!0,g)}:v=()=>{var g=e[t];return g!==void 0&&(i=void 0),g===void 0?i:g},s&&(n&Ms)===0)return v;if(u){var c=e.$$legacy;return(function(g,x){return arguments.length>0?((!s||!x||c||_)&&u(x?v():g),g):v()})}var b=!1,h=zn(()=>(b=!1,v()));p(h);var m=T;return(function(g,x){if(arguments.length>0){const P=x?p(h):s&&a?st(g):g;return A(h,P),b=!0,i!==void 0&&(i=P),g}return Qe&&b||(m.f&Ye)!==0?h.v:p(h)})}function er(e){O===null&&kr(),pt&&O.l!==null?Na(O).m.push(e):In(()=>{const t=z(e);if(typeof t=="function")return t})}function tr(e){O===null&&kr(),er(()=>()=>z(e))}function Na(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Oa="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Oa);Us();const Lt=ve([]),gt=ve(Ft("currentLessonIndex",0)),Rt=ve("study"),Mt=ve(null),an=ve(.8),at=ve(!1),kt=ve(Ft("spellingPause",150));function Da(){const e=Ft("customPlaybackSelections","{}");let t={};try{t=JSON.parse(e)}catch{t={}}const n=localStorage.getItem("customPlaybackList");if(n){try{const r=JSON.parse(n);Array.isArray(r)&&r.length>0&&(t[0]||(t[0]=r))}catch(r){console.error("Error migrating old custom playback list",r)}localStorage.removeItem("customPlaybackList")}return t}const nr=ve(Da()),Fa=Ra([nr,gt],([e,t])=>{const n=e[t]||[];return new Set(n)}),Rn=ve(Ft("finnishPlaybackReps",1)),Mn=ve(Ft("chinesePlaybackReps",1));async function qa(){try{const e=await fetch("lessons.json");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();Lt.set(t),t.length>0&&await ls(0)}catch(e){console.error("Could not fetch lessons.json:",e),Lt.set([])}}async function ls(e){try{const t=ja(Lt)[e];if(!t){console.error(`Lesson with index ${e} not found in manifest.`);return}const n=await fetch(t.path);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();Mt.set(r),gt.set(e)}catch(t){console.error("Failed to load lesson data:",t),Mt.set(null)}}function ja(e){let t;return e.subscribe(n=>t=n)(),t}function Ft(e,t){const n=localStorage.getItem(e);return n!==null?e==="currentLessonIndex"||e==="finnishRate"||e==="spellingPause"||e==="finnishPlaybackReps"||e==="chinesePlaybackReps"?Number(n):e==="enableSpellingMode"?n==="true":n:t}function Re(e,t){localStorage.setItem(e,t)}gt.subscribe(e=>Re("currentLessonIndex",e));Rt.subscribe(e=>Re("currentMode",e));an.subscribe(e=>Re("finnishRate",e));at.subscribe(e=>Re("enableSpellingMode",e));kt.subscribe(e=>Re("spellingPause",e));nr.subscribe(e=>Re("customPlaybackSelections",JSON.stringify(e)));Rn.subscribe(e=>Re("finnishPlaybackReps",e));Mn.subscribe(e=>Re("chinesePlaybackReps",e));var Ua=B("<button></button>"),Ba=B('<nav class="days-nav svelte-1upqezx"><!></nav>');function Va(e,t){Je(t,!1);const[n,r]=bt(),s=()=>V(gt,"$currentLessonIndex",n),a=()=>V(Lt,"$lessons",n);function i(f){f!==s()&&ls(f)}ht();var o=Ba(),l=S(o);{var u=f=>{var d=Gn(),_=ot(d);Xn(_,1,a,Qn,(v,c,b)=>{var h=Ua();let m;h.textContent=`Day ${b+1}`,_e(g=>m=vt(h,1,"day-btn svelte-1upqezx",null,m,g),[()=>({active:b===s()})]),F("click",h,()=>i(b)),M(v,h)}),M(f,d)};le(l,f=>{a().length>0&&f(u)})}M(e,o),Ge(),r()}var Ha=B("<button> </button>"),za=B('<div class="mode-selector svelte-v21mrc"></div>');function Ka(e,t){Je(t,!1);const[n,r]=bt(),s=()=>V(Rt,"$currentMode",n),a=[{id:"study",name:"学习模式"},{id:"test",name:"默写模式"},{id:"practice",name:"练习模式"}];function i(l){Rt.set(l)}ht();var o=za();Xn(o,5,()=>a,Qn,(l,u)=>{var f=Ha();let d;var _=S(f);_e(v=>{d=vt(f,1,"mode-btn svelte-v21mrc",null,d,v),K(_,p(u).name)},[()=>({active:p(u).id===s()})]),F("click",f,()=>i(p(u).id)),M(l,f)}),M(e,o),Ge(),r()}const Wa="AIzaSyDdK7FPe-yfShSIYvF8nXW82K-SZcuLCQo",Ya=`https://texttospeech.googleapis.com/v1/text:synthesize?key=${Wa}`,kn=new Map,Nn=new(window.AudioContext||window.webkitAudioContext);async function Ja(e,t,n=1){const r=`${t}:${n}:${e}`;if(kn.has(r))return kn.get(r);const a=await fetch(Ya,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:{text:e},voice:{languageCode:t,name:{"fi-FI":{name:"fi-FI-Wavenet-A"},"zh-CN":{name:"cmn-CN-Wavenet-A"}}[t].name},audioConfig:{audioEncoding:"MP3",speakingRate:n}})});if(!a.ok){const f=await a.json();throw new Error(`Google TTS API error: ${f.error.message}`)}const i=await a.json(),o=atob(i.audioContent),l=new Uint8Array(o.length).map((f,d)=>o.charCodeAt(d)).buffer,u=await Nn.decodeAudioData(l);return kn.set(r,u),u}function Ga(e,t){const n=Nn.createBufferSource();return n.buffer=e,n.connect(Nn.destination),n.onended=t,n.start(0),n}async function On(e,t,n=1,r=()=>{}){try{const s=await Ja(e,t,n);return Ga(s,r)}catch(s){console.error("Failed to fetch and play TTS audio:",s),r()}}var Qa=B('<span class="speaker-icon svelte-qtq5dx" role="button" tabindex="0">🔊</span>');function Dn(e,t){Je(t,!1);const[n,r]=bt(),s=()=>V(at,"$enableSpellingMode",n),a=()=>V(an,"$finnishRate",n);let i=yr(t,"text",8),o=yr(t,"lang",8,"fi-FI"),l;const u=kt.subscribe(m=>{l=m});let f=!1,d=[];function _(m,g){try{const x=new Audio(m);x.onended=g,x.onerror=()=>{g()},x.play(),d.push(x)}catch{g()}}function v(){d.forEach(m=>{typeof m.stop=="function"?m.stop():typeof m.pause=="function"&&m.pause()}),d=[],f=!1}async function c(){if(f){v();return}f=!0;const m=s(),g=a();if(m&&o()==="fi-FI"){const x=[];x.push({type:"tts",txt:i(),ln:"fi-FI",rt:g});const P=i().toUpperCase().split("");P.forEach((k,D)=>{const j=encodeURIComponent(k);x.push({type:"audio",path:`audio/letters/${j}.wav`}),D<P.length-1&&x.push({type:"pause"})}),x.push({type:"tts",txt:i(),ln:"fi-FI",rt:g});let C=0;const $=async()=>{if(C>=x.length||!f){v();return}const k=x[C],D=()=>{C++,$()};if(k.type==="pause")setTimeout(D,l);else if(k.type==="tts"){const j=await On(k.txt,k.ln,k.rt,D);j&&d.push(j)}else k.type==="audio"&&_(k.path,D)};$()}else{const x=await On(i(),o(),g,()=>v());x&&d.push(x)}}function b(m){m.key==="Enter"&&c()}tr(()=>{v(),u()}),ht();var h=Qa();F("click",h,is(c)),F("keypress",h,b),M(e,h),Ge(),r()}var Xa=B('<div class="playback-panel svelte-1rhoa7p"><div class="slider-group svelte-1rhoa7p"><label for="finnish-reps" class="svelte-1rhoa7p"> </label> <input type="range" id="finnish-reps" min="1" max="5" step="1" class="svelte-1rhoa7p"/></div> <div class="slider-group svelte-1rhoa7p"><label for="chinese-reps" class="svelte-1rhoa7p"> </label> <input type="range" id="chinese-reps" min="1" max="5" step="1" class="svelte-1rhoa7p"/></div> <button class="play-custom svelte-1rhoa7p"><!></button></div>'),Za=B('<div><div class="entry-header svelte-1rhoa7p"><input type="checkbox" class="svelte-1rhoa7p"/> <!></div> <p class="finnish-text svelte-1rhoa7p"> </p> <p class="chinese-text svelte-1rhoa7p"> </p></div>'),ei=B('<div class="action-bar svelte-1rhoa7p"><span class="svelte-1rhoa7p"> </span> <button class="svelte-1rhoa7p">全选</button> <button class="svelte-1rhoa7p">取消全选</button> <button class="svelte-1rhoa7p">只选单词</button> <button class="svelte-1rhoa7p">只选句子</button></div> <div class="entries-grid svelte-1rhoa7p"></div>',1),ti=B("<p>Loading lesson...</p>"),ni=B('<div class="study-view svelte-1rhoa7p"><div class="controls svelte-1rhoa7p"><button> </button> <div class="custom-playback-controls svelte-1rhoa7p"><button> </button> <!></div> <div class="slider-container"><div class="rate-slider svelte-1rhoa7p"><span>语速:</span> <input type="range" min="0.5" max="1.2" step="0.1"/> <span> </span></div> <div class="spelling-toggle svelte-1rhoa7p"><input type="checkbox" id="spelling-mode"/> <label for="spelling-mode" class="svelte-1rhoa7p">拼写模式</label></div> <div class="rate-slider svelte-1rhoa7p"><span>停顿:</span> <input type="range" min="0" max="500" step="10"/> <span> </span></div></div></div> <!></div>');function ri(e,t){Je(t,!1);const[n,r]=bt(),s=()=>V(gt,"$currentLessonIndex",n),a=()=>V(Fa,"$customPlaybackList",n),i=()=>V(Mt,"$currentLessonData",n),o=()=>V(an,"$finnishRate",n),l=()=>V(Rn,"$finnishPlaybackReps",n),u=()=>V(Mn,"$chinesePlaybackReps",n),f=()=>V(at,"$enableSpellingMode",n),d=()=>V(kt,"$spellingPause",n);let _=ie(!1),v=ie(!1),c=[],b=-1,h="",m=null,g=window.speechSynthesis,x,P=ie(!1);kt.subscribe(y=>{x=y});function C(y){nr.update(w=>(w[s()]=Array.from(y),w))}function $(y){const w=a();w.has(y)?w.delete(y):w.add(y),C(w)}function k(){const y=new Set(i().entries.map((w,R)=>R));C(y)}function D(){C(new Set)}function j(){const y=new Set(i().entries.map((w,R)=>({entry:w,i:R})).filter(({entry:w})=>!w.finnish.includes(" ")&&w.finnish.length>0).map(({i:w})=>w));C(y)}function Me(){const y=new Set(i().entries.map((w,R)=>({entry:w,i:R})).filter(({entry:w})=>w.finnish.includes(" ")).map(({i:w})=>w));C(y)}function Ee(y,w){try{const R=new Audio(y);R.onended=w,R.onerror=()=>{console.error(`Error playing audio file: ${y}`),w()},R.play(),m=R}catch(R){console.error(`Failed to create audio object for path: ${y}`,R),w()}}function E(){m&&(typeof m.stop=="function"?m.stop():typeof m.pause=="function"&&(m.pause(),m.currentTime=0)),m=null,g.cancel(),A(v,!1),A(P,!1),c=[],b=-1,h=""}function q(){if(p(P)){E();return}const y=Array.from(a()).sort((ee,Z)=>ee-Z).map(ee=>i().entries[ee]);if(y.length===0)return;const w=Tn(at),R=o(),X=l(),$e=u();c=[],y.forEach(ee=>{const Z=ee.finnish;for(let te=0;te<X;te++)if(c.push({type:"tts",text:Z,lang:"fi-FI",rate:R}),w&&!Z.includes(" ")){const Ze=Z.toUpperCase().split("");Ze.forEach((wt,qe)=>{const je=wt.replace(/Ä/g,"A_umlaut").replace(/Ö/g,"O_umlaut");c.push({type:"audio",path:`audio/letters/${je}.wav`}),qe<Ze.length-1&&c.push({type:"pause"})}),c.push({type:"tts",text:Z,lang:"fi-FI",rate:R})}for(let te=0;te<$e;te++)c.push({type:"tts",text:ee.chinese,lang:"zh-CN",rate:1})}),A(P,!0),A(v,!1),b=0,A(_,!1),J()}function U(){p(P)?E():A(_,!p(_))}function de(){if(p(v)){E();return}if(!i()||!i().entries)return;const y=Tn(at),w=o();c=[],i().entries.forEach(R=>{const X=R.finnish;if(c.push({type:"tts",text:X,lang:"fi-FI",rate:w}),y&&!X.includes(" ")){const $e=X.toUpperCase().split("");$e.forEach((ee,Z)=>{const te=ee.replace(/Ä/g,"A_umlaut").replace(/Ö/g,"O_umlaut");c.push({type:"audio",path:`audio/letters/${te}.wav`}),Z<$e.length-1&&c.push({type:"pause"})}),c.push({type:"tts",text:X,lang:"fi-FI",rate:w})}c.push({type:"tts",text:R.chinese,lang:"zh-CN",rate:1})}),A(v,!0),A(P,!1),b=0,J()}async function J(){if(b>=c.length)if(p(v)||p(P))b=0;else{E();return}if(c.length===0){E();return}const y=c[b],w=()=>{b++,J()};if(y.type==="pause"){setTimeout(w,x);return}h=y.lang==="fi-FI"?y.text:h;try{y.type==="tts"?m=await On(y.text,y.lang,y.rate,w):y.type==="audio"?Ee(y.path,w):y.type==="pause"&&setTimeout(w,x)}catch(R){console.error("Playback error:",R),E()}}tr(E),ht();var Ne=ni(),Oe=S(Ne),De=S(Oe),_n=S(De),qt=I(De,2),Se=S(qt);let jt;var Xe=S(Se),Ut=I(Se,2);{var hn=y=>{var w=Xa(),R=S(w),X=S(R),$e=S(X),ee=I(X,2),Z=I(R,2),te=S(Z),Ze=S(te),wt=I(te,2),qe=I(Z,2),je=S(qe);{var et=ne=>{var Ue=hr("停止循环");M(ne,Ue)},tt=ne=>{var Ue=hr();_e(()=>K(Ue,`开始循环 (${a().size??""}项)`)),M(ne,Ue)};le(je,ne=>{p(P)?ne(et):ne(tt,!1)})}_e(()=>{K($e,`芬兰语重复: ${l()??""}次`),K(Ze,`中文重复: ${u()??""}次`),qe.disabled=a().size===0||p(v)}),St(ee,l,ne=>xt(Rn,ne)),St(wt,u,ne=>xt(Mn,ne)),F("click",qe,q),M(y,w)};le(Ut,y=>{p(_)&&y(hn)})}var Bt=I(qt,2),Vt=S(Bt),Ht=I(S(Vt),2),yt=I(Ht,2),zt=S(yt),Kt=I(Vt,2),Wt=S(Kt),bn=I(Kt,2),H=I(S(bn),2),fe=I(H,2),ke=S(fe),Fe=I(Oe,2);{var mt=y=>{var w=ei(),R=ot(w),X=S(R),$e=S(X),ee=I(X,2),Z=I(ee,2),te=I(Z,2),Ze=I(te,2),wt=I(R,2);Xn(wt,5,()=>i().entries,Qn,(qe,je,et)=>{var tt=Za();let ne;var Ue=S(tt),Yt=S(Ue),os=I(Yt,2);Dn(os,{get text(){return p(je).finnish},lang:"fi-FI"});var rr=I(Ue,2),us=S(rr),fs=I(rr,2),cs=S(fs);_e((gn,vs)=>{ne=vt(tt,1,"entry-item svelte-1rhoa7p",null,ne,gn),Aa(Yt,vs),K(us,p(je).finnish),K(cs,p(je).chinese)},[()=>({selected:a().has(et)}),()=>a().has(et)]),F("click",Yt,is(function(gn){Ta.call(this,t,gn)})),F("change",Yt,()=>$(et)),F("click",tt,()=>$(et)),M(qe,tt)}),_e(()=>K($e,`已选择 ${a().size??""} / ${i().entries.length??""} 项`)),F("click",ee,k),F("click",Z,D),F("click",te,j),F("click",Ze,Me),M(y,w)},Pe=y=>{var w=ti();M(y,w)};le(Fe,y=>{i()?y(mt):y(Pe,!1)})}_e((y,w)=>{De.disabled=p(P)||p(v),K(_n,p(v)?"停止朗读":"整课循环朗读"),Se.disabled=p(v),jt=vt(Se,1,"svelte-1rhoa7p",null,jt,y),K(Xe,p(P)?"停止自定义循环":"自定义循环播放"),K(zt,`${w??""}x`),K(ke,`${d()??""}ms`)},[()=>({playing:p(P)}),()=>o().toFixed(1)]),F("click",De,de),F("click",Se,U),St(Ht,o,y=>xt(an,y)),Ca(Wt,f,y=>xt(at,y)),St(H,d,y=>xt(kt,y)),M(e,Ne),Ge(),r()}var si=B('<div class="card completion-card svelte-1c5xhip"><p class="svelte-1c5xhip">🎉 恭喜！您已完成本课的所有练习！</p> <button class="btn svelte-1c5xhip">重新开始</button></div>'),ai=B('<div class="translation-container svelte-1c5xhip"><p> </p> <button class="btn-toggle svelte-1c5xhip"> </button></div>'),ii=B('<button class="btn check-btn svelte-1c5xhip">检查</button>'),li=B('<div><p class="svelte-1c5xhip"> </p> <p class="correct-answer svelte-1c5xhip"><span> </span> <!></p></div>'),oi=B('<div class="card svelte-1c5xhip"><p class="question svelte-1c5xhip"><span> </span> <!></p> <!> <input id="answer-input" type="text" placeholder="输入你的答案..." class="svelte-1c5xhip"/> <!> <!> <div class="navigation svelte-1c5xhip"><button class="btn svelte-1c5xhip">上一题</button> <span> </span> <button class="btn svelte-1c5xhip"> </button></div></div>'),ui=B('<div class="practice-view svelte-1c5xhip"><!></div>');function fi(e,t){Je(t,!1);const[n,r]=bt(),s=()=>V(gt,"$currentLessonIndex",n),a=()=>V(Rt,"$currentMode",n),i=()=>V(Mt,"$currentLessonData",n);let o=ie([]),l=ie(0),u=ie(""),f=ie({message:"",isCorrect:!1,showCorrect:!1,correctAnswer:""}),d=ie(!1),_=ie(!1);function v(E){let q=E.length,U;for(;q!==0;)U=Math.floor(Math.random()*q),q--,[E[q],E[U]]=[E[U],E[q]];return E}function c(E,q,U){const J=JSON.parse(localStorage.getItem("suomenProgress")||"{}")?.[E]?.[q];J&&J.shuffledEntries?(A(o,J.shuffledEntries),A(l,J.currentIndex||0)):(A(o,v([...U])),A(l,0),b()),A(_,p(l)>=p(o).length)}function b(){const E=s(),q=a(),U=JSON.parse(localStorage.getItem("suomenProgress")||"{}");U[E]||(U[E]={}),U[E][q]={shuffledEntries:p(o),currentIndex:p(l)},localStorage.setItem("suomenProgress",JSON.stringify(U))}let h=ie();function m(){if(!p(h))return;const E=a()==="test"?p(h).chinese:p(h).finnish;p(u).trim().toLowerCase()===E.trim().toLowerCase()?(A(f,{message:"正确!",isCorrect:!0,showCorrect:!0,correctAnswer:E}),setTimeout(()=>{g()},800)):A(f,{message:"错误. 正确答案:",isCorrect:!1,showCorrect:!0,correctAnswer:E})}function g(){p(l)<p(o).length-1?(mn(l),b(),P()):(mn(l),b(),A(_,!0))}function x(){p(l)>0&&(mn(l,-1),b(),P())}function P(){A(u,""),A(f,{message:"",isCorrect:!1,showCorrect:!1,correctAnswer:""}),A(d,!1),setTimeout(()=>{const E=document.getElementById("answer-input");E&&E.focus()},0)}function C(){A(o,v([...i().entries])),A(l,0),A(_,!1),b(),P()}function $(E){E.key==="Alt"&&a()==="practice"&&(E.preventDefault(),A(d,!0))}function k(E){E.key==="Alt"&&a()==="practice"&&A(d,!1)}er(()=>{window.addEventListener("keydown",$),window.addEventListener("keyup",k)}),tr(()=>{window.removeEventListener("keydown",$),window.removeEventListener("keyup",k)}),fr(()=>(i(),s(),a()),()=>{i()&&(c(s(),a(),i().entries),P())}),fr(()=>(p(o),p(l)),()=>{A(h,p(o)[p(l)])}),aa(),ht();var D=ui(),j=S(D);{var Me=E=>{var q=si(),U=I(S(q),2);F("click",U,C),M(E,q)},Ee=E=>{var q=Gn(),U=ot(q);{var de=J=>{var Ne=oi(),Oe=S(Ne),De=S(Oe),_n=S(De),qt=I(De,2);Dn(qt,{get text(){return p(h),z(()=>p(h).finnish)}});var Se=I(Oe,2);{var jt=H=>{var fe=ai(),ke=S(fe);let Fe;var mt=S(ke),Pe=I(ke,2),y=S(Pe);_e(w=>{Fe=vt(ke,1,"translation svelte-1c5xhip",null,Fe,w),K(mt,(p(h),z(()=>p(h).chinese))),K(y,p(d)?"隐藏翻译":"按住显示翻译")},[()=>({visible:p(d)})]),F("mousedown",Pe,()=>A(d,!0)),F("mouseup",Pe,()=>A(d,!1)),F("mouseleave",Pe,()=>A(d,!1)),M(H,fe)};le(Se,H=>{a()==="practice"&&H(jt)})}var Xe=I(Se,2),Ut=I(Xe,2);{var hn=H=>{var fe=ii();F("click",fe,m),M(H,fe)};le(Ut,H=>{p(f),z(()=>!p(f).showCorrect)&&H(hn)})}var Bt=I(Ut,2);{var Vt=H=>{var fe=li();let ke;var Fe=S(fe),mt=S(Fe),Pe=I(Fe,2),y=S(Pe),w=S(y),R=I(y,2);Dn(R,{get text(){return p(h),z(()=>p(h).finnish)}}),_e(X=>{ke=vt(fe,1,"feedback svelte-1c5xhip",null,ke,X),K(mt,(p(f),z(()=>p(f).message))),K(w,(p(f),z(()=>p(f).correctAnswer)))},[()=>({correct:p(f).isCorrect,incorrect:!p(f).isCorrect})]),M(H,fe)};le(Bt,H=>{p(f),z(()=>p(f).showCorrect)&&H(Vt)})}var Ht=I(Bt,2),yt=S(Ht),zt=I(yt,2),Kt=S(zt),Wt=I(zt,2),bn=S(Wt);_e(()=>{K(_n,(p(h),z(()=>p(h).finnish))),Xe.disabled=(p(f),z(()=>p(f).showCorrect)),yt.disabled=p(l)===0,K(Kt,`${p(l)+1} / ${p(o),z(()=>p(o).length)??""}`),K(bn,(p(f),z(()=>p(f).showCorrect?"下一题":"跳过")))}),St(Xe,()=>p(u),H=>A(u,H)),F("keydown",Xe,H=>H.key==="Enter"&&m()),F("click",yt,x),F("click",Wt,g),M(J,Ne)};le(U,J=>{p(h)&&J(de)},!0)}M(E,q)};le(j,E=>{p(_)?E(Me):E(Ee,!1)})}M(e,D),Ge(),r()}var ci=B("<p>Loading day's content...</p>"),vi=B('<!> <!> <div class="content-area"><!></div>',1),di=B("<p>Loading lesson manifest...</p>"),pi=B('<header class="svelte-nwa0j8"><h1 class="svelte-nwa0j8">Suomen Oppiminen</h1> <p class="svelte-nwa0j8">芬兰语学习笔记</p></header> <main class="svelte-nwa0j8"><!></main> <footer class="svelte-nwa0j8"><p>Opetellaan suomea yhdessä!</p></footer>',1);function _i(e,t){Je(t,!1);const[n,r]=bt(),s=()=>V(Lt,"$lessons",n),a=()=>V(Mt,"$currentLessonData",n),i=()=>V(Rt,"$currentMode",n);er(()=>{qa()}),ht();var o=pi(),l=I(ot(o),2),u=S(l);{var f=_=>{var v=vi(),c=ot(v);Va(c,{});var b=I(c,2);Ka(b,{});var h=I(b,2),m=S(h);{var g=P=>{var C=Gn(),$=ot(C);{var k=j=>{ri(j,{})},D=j=>{fi(j,{})};le($,j=>{i()==="study"?j(k):j(D,!1)})}M(P,C)},x=P=>{var C=ci();M(P,C)};le(m,P=>{a()?P(g):P(x,!1)})}M(_,v)},d=_=>{var v=di();M(_,v)};le(u,_=>{s().length>0?_(f):_(d,!1)})}M(e,o),Ge(),r()}ma(_i,{target:document.getElementById("app")});
